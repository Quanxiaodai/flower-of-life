<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Canvas Playground - Flower of Life - mrkiffie.com</title>

    <style>
        body{
            margin: 0 auto;
            font-family: sans-serif;
            font-size: 100%;
            position: relative;
        }
        #canvas{
            margin: 2%;
            cursor: pointer;
        }
        .no-js #controls{
            display: none;
        }
        #controls{
            position: absolute;
            top: 0;
            padding: 1em;
        }
        .control-group{
            display: block;
            position: relative;
        }
        input{
            position: absolute;
            top: 1.2em;
            left: 1.2em;
            z-index: 1;
            cursor: pointer;
        }
        label{
            display: inline-block;
            background: hsla(250, 10%, 50%, .4);
            padding: .5em .8em .5em 2.2em;
            margin: .5em;
            cursor: pointer;
            border-radius: .3em;
            color: #fff;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        input:checked + label{
            background: hsla(250, 80%, 50%, .4);
        }
        input:focus + label{
            outline: 4px dotted #000;
        }
    </style>

</head>
<body class="no-js">
    <script>
        var b = document.getElementsByTagName('body')[0];
        b.classList.toggle('no-js');
    </script>
    <div id="controls">
        <div class="control-group">
            <input name="randomizeColors" id="randomizeColors" type="checkbox">
            <label for="randomizeColors">Randomize Hue</label>
        </div>
        <div class="control-group">
            <input name="randomizeAngularOffset" id="randomizeAngularOffset" type="checkbox">
            <label for="randomizeAngularOffset">Randomize Angular Offset</label>
        </div>
    </div>

    <canvas id="canvas" width="600" height="600">
        Ummm. Your browser doesn't support canvas :(

    </canvas>
    <script>
        function isCanvasSupported(){
          var elem = document.createElement('canvas');
          return !!(elem.getContext && elem.getContext('2d'));
        }
        if (!isCanvasSupported()){
            (document.getElementById('controls')).style.display = 'none';
        }

        var randomizeColors = false;
        var randomizeAngularOffset = false;

        /* We need to convert degrees to radians because that is what
         * Math.sin() accepts. A radian is the angle generated in an
         * arc where the radius and the arc have the same length.
         * To calculate the circumference of of a circle, one uses the
         * formula:
         *
         *   circumference = 2 * PI * r
         *
         * Thus radians as a ratio to degrees can be expressed as:
         *
         *     360 degree = 2 * PI radian
         *     180 degree = PI radian
         *       1 degree = PI/180 radian
         *
         * or the reverse ratio 1 radian = 180/PI deg
         *
         */
        function degToRad( deg ){
            return ( deg * Math.PI / 180 );
        }


        /**
         * This just returns a random integer within the specified range
         */
        function randomInt( min, max ) {
            return Math.floor( Math.random() * ( max - min + 1 ) + min );
        }

        /**
         * Returns a color
         */
        function randomColor(){
            var hue = randomizeColors ? randomInt( 0, 360 ) : 250 ;
            return 'hsla(' + hue + ', 80%, 50%, .4)'
        }


        /**
         * This creates the circles on the the canvas
         */
        function doCircle( x, y, r ){
            context.beginPath();
            context.arc( x, y, r, 0, degToRad( 360 ), false );
            context.fillStyle = randomColor();
            context.fill();
            //context.lineWidth = 10;
            //context.strokeStyle = randomColor()
            //context.stroke();
        }

        var c = document.getElementById( 'canvas' );
        var context = c.getContext( '2d' );


        function doPattern(){
            var w = c.width;
            var h = c.height;
            var x = w / 2; // half the canvas's width - center x
            var y = h / 2; // half the canvas's height - center y
            var r = ( x > y ? y : x ) / 3; // set the radius to half the smallest dimension of the canvas
            var a = randomizeAngularOffset ? randomInt( 0, 360 ) : 0;  // rotational offset in degrees

            // first clear canvas
            context.clearRect( 0, 0, w, h );

            // center circle
            doCircle( x, y, r );

            for (var i = 0; i < 6 ; i++ ){
                doCircle(
                    ( x + r * Math.sin( degToRad( i * 60 + a ) ) ),
                    ( y + r * Math.cos( degToRad( i * 60 + a ) ) ),
                    r
                );
            }
        }

        // adding event listener to recreate the pattern on click
        c.addEventListener( 'click', doPattern, false );

        function adjustCanvasDimensions(){
            var w = window.innerWidth;
            var h = window.innerHeight;

            c.width = w *.96;
            c.height = h *.96;

            doPattern();
        }

        adjustCanvasDimensions();

        window.addEventListener('resize', adjustCanvasDimensions, false);


        // controls
        function boxChecked(e){
            if (e.target && e.target.id){
                var id = e.target.id;
                window[id] = document.getElementById(id).checked;
                doPattern();
            }

        }

        (document.getElementById('randomizeColors'))
            .addEventListener('click', boxChecked, false );
        (document.getElementById('randomizeAngularOffset'))
            .addEventListener('click', boxChecked, false );

    </script>

</body>
</html>
